{% extends "base.html" %}
{% block title %}
{% if title %}
{{ title }}
{% else %}MassMail
{% endif %}
{% endblock %}
{% block content %}
<div class="pricing-header px-2 pt-md-5 pb-md-4 mx-auto py-5 text-center">
    <h1 class="display-4">MassMail Sender</h1>
</div>

<div class="container-fluid pb-2 main_content_container" style="height: 90%">

    <div class="row row-cols-10 row-cols-sm-2 row-cols-md-3 row-cols-lg-10 row-cols-xxl-10 d-flex">
        <div class="col-5 justify-content-center" style="background-color: #FFF">
            {% if clients %}
            <h4 class="d-flex justify-content-center">Клиенты:</h4>
            {% endif %}
            <br>
            {% for client in clients %}
            <div class="d-flex justify-content-center">
                <a href="{% url 'client_details' pk=client.id %}" type="button"
                   class="btn btn-lg btn-outline-primary "
                   style="width: 90%">{{client.full_name}}
                </a>
            </div>
            {% endfor %}
        </div>
        <div class="col-5">
            {% if messages_to_send %}
            <h4 class="d-flex justify-content-center">Сообщения:</h4>
            {% endif %}
            <br>
            {% for message in messages_to_send %}
            <div class="d-flex justify-content-center">
                <a href="{% url 'message_details' pk=message.id %}" type="button"
                   class="btn btn-lg btn-outline-primary mx-auto px-5 float-bottom" style="width: 90%">{{message.topic}}
                </a>
            </div>
            {% endfor %}
        </div>
        <div class="col-5">
            {% if mailings %}
            <h4 class="d-flex justify-content-center">Рассылки:</h4>
            {% endif %}
            <br>
            {% for mailing in mailings %}
            <div class="d-flex justify-content-center">
                {% if mailing.status == "Создана" %}
                <a href="{% url 'mailing_details' pk=mailing.id %}" type="button"
                   class="btn btn-lg btn-primary mb-2 px-5 float-bottom" style="width: 90%">Рассылка
                    {{mailing.id}}
                </a>
                {% elif mailing.status == "Запущена" %}
                <a href="{% url 'mailing_details' pk=mailing.id %}" type="button"
                   class="btn btn-lg btn-success mb-2 px-5 float-bottom" style="width: 40rem">Рассылка
                    {{mailing.id}}
                </a>
                {% else %}
                <a href="{% url 'mailing_details' pk=mailing.id %}" type="button"
                   class="btn btn-lg btn-secondary mb-2 px-5 float-bottom" style="width: 40rem">Рассылка
                    {{mailing.id}}
                </a>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% if user.is_authenticated %}
<div class="fixed-bottom">
    <h4>Число рассылок: {{total_mailings_count}}</h4>
    <h4>Число активных рассылок: {{active_mailings_count}}</h4>
    <h4>Число клиентов: {{clients_count}}</h4>
    <!--    <footer>-->
    <!--        {% if active_mailings_count %}-->
    <!--        <h4>Число активных рассылок: {{active_mailings_count}}</h4>-->
    <!--        {% endif %}-->
    <!--    </footer>-->
</div>
{% endif %}
{% endblock %}
{% block navigation %}
<nav class="list-pages" style="height:15px">
    <ul class="list-inline">
        {% for p in paginator.page_range %}
        {% if page_obj.number == p %}
        <li class="page-num page-num-selected">{{ p }}</li>
        {% else %}
        <li class="page-num">
            <a href="?page={{ p }}">{{ p }}</a>
        </li>
        {% endif %}

        {% endfor %}
    </ul>
</nav>
{% endblock %}